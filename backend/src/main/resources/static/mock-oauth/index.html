<!DOCTYPE html>
<html>
<head>
    <title>Handi</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }

        .welcome {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        .status {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
            color: #2e7d32;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        .access-token {
            font-size: 10pt;
            white-space: pre-wrap;
            word-break: break-all;
            position: relative;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
            margin: 10px 0;
        }

        .copy-button {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-button:hover {
            background: #5a6fd8;
        }

        .copy-button.copied {
            background: #4caf50;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>üè• Handi</h1>
    <div class="welcome">ÏãúÎãàÏñ¥ ÏºÄÏñ¥ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</div>
    <div class="status">
        <div class="loading"></div>
        Î°úÍ∑∏Ïù∏ Ï≤òÎ¶¨ Ï§ë...
    </div>
</div>

<script>

    // Ïø†ÌÇ§ÏóêÏÑú ÌÜ†ÌÅ∞ ÌôïÏù∏
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }

    // Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏
    const accessToken = getCookie('accessToken');
    if (accessToken) {
        document.querySelector('.status').innerHTML = '‚úÖ Î°úÍ∑∏Ïù∏ ÏôÑÎ£å!';
        document.querySelector('.status').style.background = '#e8f5e8';
        setTimeout(() => {
            document.querySelector('.welcome').innerHTML = `<div class="access-token">${accessToken}<button class="copy-button" onclick="copyToken()">Î≥µÏÇ¨</button></div>`;
        }, 100);
    } else {
        setTimeout(() => {
            document.querySelector('.status').innerHTML = '‚ùå Î°úÍ∑∏Ïù∏ Ïã§Ìå®';
            document.querySelector('.status').style.background = '#ffeaea';
            document.querySelector('.status').style.borderColor = '#f44336';
            document.querySelector('.status').style.color = '#c62828';
        }, 100);
    }

    // ÌÜ†ÌÅ∞ Î≥µÏÇ¨ Ìï®Ïàò
    function copyToken() {
        const accessToken = getCookie('accessToken');
        if (accessToken) {
            navigator.clipboard.writeText(accessToken).then(() => {
                const button = document.querySelector('.copy-button');
                button.textContent = 'Î≥µÏÇ¨Îê®!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = 'Î≥µÏÇ¨';
                    button.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Î≥µÏÇ¨ Ïã§Ìå®:', err);
                alert('Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
            });
        }
    }

</script>
</body>
</html>